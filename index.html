/**
 * Space Golf - Main HTML file
 * This file sets up the basic structure and includes necessary scripts and styles.
 * Had help from copilot
 */

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Space Golf</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: #000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        #game-canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        
        #ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        #mode-selector {
            position: absolute;
            top: 20px;
            left: 20px;
            pointer-events: auto;
        }
        
        #mode-selector button {
            padding: 10px 20px;
            margin-right: 10px;
            font-size: 16px;
            cursor: pointer;
            border: 2px solid #4CAF50;
            background: rgba(0, 0, 0, 0.7);
            color: #4CAF50;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        #mode-selector button:hover {
            background: #4CAF50;
            color: #000;
        }
        
        #mode-selector button.active {
            background: #4CAF50;
            color: #000;
        }

        #levels-selector {
            position: absolute;
            top: 20px;
            left: 20px;
            pointer-events: auto;
            margin-top: 60px;
            z-index: 1000;
        }

        #levels-button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: 2px solid #ff6b35;
            background: rgba(0, 0, 0, 0.7);
            color: #ff6b35;
            border-radius: 5px;
            transition: all 0.3s;
            min-width: 120px;
        }

        #levels-button:hover {
            background: #ff6b35;
            color: #000;
        }

        #levels-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #ff6b35;
            border-radius: 5px;
            min-width: 120px;
            z-index: 10000;
            margin-top: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        #levels-dropdown.show {
            display: block !important;
        }

        .level-option {
            padding: 10px 15px;
            color: #ff6b35;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 1px solid rgba(255, 107, 53, 0.2);
        }

        .level-option:last-child {
            border-bottom: none;
        }

        .level-option:hover {
            background: #ff6b35;
            color: #000;
        }

        .level-option.current {
            background: rgba(255, 107, 53, 0.3);
            font-weight: bold;
        }
        
        .level-option.completed {
            text-decoration: line-through;
            opacity: 0.6;
            color: #4CAF50;
        }
        
        .level-option.completed:hover {
            background: rgba(76, 175, 80, 0.3);
            color: #4CAF50;
        }
        
        #game-info {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #fff;
            font-size: 18px;
            text-shadow: 2px 2px 4px #000;
            pointer-events: auto;
            z-index: 10001;
        }
        
        #scorecard-button {
            margin-top: 10px;
            padding: 8px 16px;
            background: rgba(255, 107, 53, 0.8);
            color: white;
            border: 2px solid #ff6b35;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px #000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            pointer-events: auto;
        }
        
        #scorecard-button:hover {
            background: #ff6b35;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }
        
        #scorecard-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        #scorecard-modal {
            pointer-events: auto;
        }
        
        #close-scorecard {
            pointer-events: auto;
        }
        
        #power-bar {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #fff;
            border-radius: 10px;
            overflow: hidden;
        }
        
        #power-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00ff00, #ffff00, #ff0000);
            transition: width 0.05s;
        }
        
        #aim-indicator {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 14px;
            text-shadow: 2px 2px 4px #000;
        }
        
        #controls-help {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #aaa;
            font-size: 12px;
            pointer-events: auto;
        }
        
        #touch-controls {
            display: none;
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            pointer-events: auto;
        }
        
        .touch-btn {
            width: 60px;
            height: 60px;
            margin: 5px;
            border: 2px solid #4CAF50;
            background: rgba(0, 0, 0, 0.5);
            color: #4CAF50;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
        }
        
        @media (pointer: coarse) {
            #touch-controls {
                display: flex;
            }
        }

        /* Start Screen Styles */
        #start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000428 0%, #004e92 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            color: white;
            text-align: center;
        }

        /* Hide game UI elements when start screen is visible */
        body.start-screen-active #game-info,
        body.start-screen-active #mode-selector,
        body.start-screen-active #levels-selector,
        body.start-screen-active #aim-indicator,
        body.start-screen-active #power-bar,
        body.start-screen-active #touch-controls,
        body.start-screen-active #controls-help {
            display: none !important;
        }

        #start-screen h1 {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #4CAF50;
            text-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
            font-weight: bold;
            letter-spacing: 3px;
        }

        #start-screen .subtitle {
            font-size: 1.5rem;
            margin-bottom: 40px;
            color: #ff6b35;
            text-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
        }

        #start-screen .group-id {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        #start-screen .game-description {
            font-size: 1rem;
            margin-bottom: 40px;
            max-width: 600px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            padding: 0 20px;
        }

        #start-button {
            padding: 15px 40px;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
            margin-bottom: 30px;
        }

        #start-button:hover {
            background: linear-gradient(135deg, #45a049, #4CAF50);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.6);
        }

        #start-button:active {
            transform: translateY(0);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        #start-screen .controls-preview {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 20px;
            max-width: 500px;
            line-height: 1.5;
        }

        .start-screen-stars {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite ease-in-out alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.2); }
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div id="start-screen">
        <div class="start-screen-stars"></div>
        <h1>üöÄ SPACE GOLF</h1>
        <div class="subtitle">Galactic Mini Golf Adventure</div>
        <div class="group-id">Group ID: 0429</div>
        <div class="game-description">
            Navigate through 9 challenging holes across the cosmos! Avoid planets, stars, and UFOs while mastering the physics of space golf. Each hole features unique obstacles and layouts that will test your precision and skill.
        </div>
        <button id="start-button" onclick="startGame()">üåü START GAME üåü</button>
        <div class="controls-preview">
            <strong>Controls:</strong><br>
            Arrow Keys: Aim your shot | Spacebar: Hold to charge power, release to shoot<br>
            Touch: Swipe to aim, tap and hold to charge power
        </div>
    </div>

    <canvas id="game-canvas"></canvas>
    
    <div id="ui-overlay">
        <div id="mode-selector">
            <button id="btn-full" class="active">Full Mode</button>
            <button id="btn-prototype">Prototype Mode</button>
        </div>

        <div id="levels-selector">
            <button id="levels-button">Holes</button>
            <div id="levels-dropdown">
                <div class="level-option current" data-level="1">Hole 1</div>
                <div class="level-option" data-level="2">Hole 2</div>
                <div class="level-option" data-level="3">Hole 3</div>
                <div class="level-option" data-level="4">Hole 4</div>
                <div class="level-option" data-level="5">Hole 5</div>
                <div class="level-option" data-level="6">Hole 6</div>
                <div class="level-option" data-level="7">Hole 7</div>
                <div class="level-option" data-level="8">Hole 8</div>
                <div class="level-option" data-level="9">Hole 9</div>
            </div>
        </div>
        
        <div id="game-info">
            <div>Group ID: 0429</div>
            <div>Hole: <span id="hole-number">1</span> / 9</div>
            <div>Strokes: <span id="stroke-count">0</span></div>
            <div>Par: <span id="par-count">3</span></div>
            <button id="scorecard-button" onclick="window.showScorecardRobust()">Scorecard</button>
        </div>
        
        <div id="aim-indicator">Use arrow keys or touch to aim</div>
        
        <div id="power-bar">
            <div id="power-fill"></div>
        </div>
        
        <div id="touch-controls">
            <button class="touch-btn" id="touch-left">‚Üê</button>
            <button class="touch-btn" id="touch-shoot">‚¨Ü</button>
            <button class="touch-btn" id="touch-right">‚Üí</button>
        </div>
        
        <div id="controls-help">
            <p>Arrow Keys: Aim | Space: Hold to charge, release to shoot</p>
            <p>Touch: Swipe to aim, tap and hold to charge</p>
        </div>
        
        <div id="restart-message" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255, 0, 0, 0.8); color: white; padding: 20px; border-radius: 10px; font-size: 18px; font-weight: bold; z-index: 999; pointer-events: none;">
            Ball went out of bounds! Level restarted.
        </div>
        
        <div id="score-message" style="display: none; position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, rgba(76, 175, 80, 0.95), rgba(56, 142, 60, 0.95)); color: white; padding: 30px; border-radius: 15px; font-size: 24px; font-weight: bold; z-index: 999; text-align: center; border: 3px solid #4CAF50; box-shadow: 0 0 20px rgba(76, 175, 80, 0.5); pointer-events: none;">
            <div id="score-term" style="font-size: 32px; margin-bottom: 10px;"></div>
            <div id="score-details" style="font-size: 18px; margin-top: 10px; opacity: 0.9;"></div>
        </div>
        
        <div id="scorecard-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.95); color: white; padding: 30px; border-radius: 15px; z-index: 10002; border: 3px solid #ff6b35; box-shadow: 0 0 30px rgba(255, 107, 53, 0.5); max-width: 500px; width: 90%;">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #ff6b35; margin: 0 0 10px 0; font-size: 28px;">üèåÔ∏è Scorecard</h2>
                <button id="close-scorecard" onclick="window.hideScorecardRobust()" style="position: absolute; top: 15px; right: 20px; background: none; border: none; color: #ff6b35; font-size: 24px; cursor: pointer; font-weight: bold;">√ó</button>
            </div>
            <div id="scorecard-content"></div>
            <div id="scorecard-totals" style="margin-top: 20px; padding-top: 15px; border-top: 2px solid #ff6b35; font-weight: bold; text-align: center;"></div>
        </div>
    </div>
    
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
    }
    </script>
    <script>
        // Start Screen Functions
        function startGame() {
            const startScreen = document.getElementById('start-screen');
            startScreen.style.opacity = '0';
            startScreen.style.transition = 'opacity 1s ease-out';
            // After fade out, hide the start screen
            setTimeout(() => {
                startScreen.style.display = 'none';
                document.body.classList.remove('start-screen-active');
            }, 1000);
        }

        // Create animated stars background
        function createStars() {
            const starsContainer = document.querySelector('.start-screen-stars');
            const starCount = 50;
            // Generate stars
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = (Math.random() * 3 + 1) + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 2 + 's';
                star.style.animationDuration = (Math.random() * 3 + 1) + 's';
                starsContainer.appendChild(star);
            }
        }

        // Initialize stars when page loads
        window.addEventListener('DOMContentLoaded', function() {
            createStars();
            document.body.classList.add('start-screen-active');
        });
    </script>
    <script type="module" src="/src/main.js"></script>
</body>
</html>
